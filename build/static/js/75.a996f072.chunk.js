"use strict";(self.webpackChunkNeorain=self.webpackChunkNeorain||[]).push([[75],{1075:(t,e,i)=>{i.r(e),i.d(e,{default:()=>h});var a=i(5043),n=i(4674),s=i(1802),c=i(5397),l=i(2560),r=i(4442),o=i(9456),u=i(6178),d=i.n(u),m=i(2104),y=i(7503),v=i(579);const{Option:p}=n.A,h=()=>{const[t,e]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[u,p]=(0,a.useState)(""),[h,f]=(0,a.useState)([]),[g,k]=(0,a.useState)(null),[x,S]=(0,a.useState)(""),[w,A]=(0,a.useState)(null),[j,C]=(0,a.useState)(null),{user:b}=(0,o.d4)((t=>t));(0,a.useEffect)((()=>{const t=(0,m.Ay)("https://user-analytics-system-825467496328.us-central1.run.app");return t.on("newActivityrecord",(t=>{e((e=>{const i=[...e,t];return f(i),E(i),y.oR.success("New activity recorded: ".concat(t.activity)),i}))})),()=>{t.disconnect()}}),[]),(0,a.useEffect)((()=>{(async()=>{try{const t=await(0,r.V9)(b.token);if(t&&t.data){const i=t.data.map((t=>{const e=t.action;let i="",a="",n="";return"string"===typeof e?i=e:"object"===typeof e&&(i=e.activity||"Unknown Activity",a=e.email||"",n=e.timestamp||""),{id:t.id,activity:i,email:a,timestamp:n}}));e(i),f(i),E(i),n(!1)}else n(!1)}catch(t){console.error("Error fetching activities:",t),n(!1)}})()}),[b.token]);const E=t=>{const e=t.reduce(((t,e)=>(t[e.email]=(t[e.email]||0)+1,t)),{}),i=Object.entries(e).reduce(((t,e)=>{let[i,a]=e;return a>t.count?{email:i,count:a}:t}),{email:null,count:0});C(i.email)},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=t.filter((t=>t.activity.toLowerCase().includes(e.toLowerCase())&&(!i||t.activity.includes(i))&&(!a||t.email.includes(a))&&(!n||d()(t.timestamp).isSame(n,"day"))));f(s)},N=(new Set(t.map((t=>t.activity))),[{title:"Activity",dataIndex:"activity",key:"activity"},{title:"Email",dataIndex:"email",key:"email"},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",render:t=>new Date(t).toLocaleString()}]);return(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-center text-danger",children:"Users Activities"}),(0,v.jsxs)("div",{style:{marginBottom:16},children:[(0,v.jsx)(s.A,{onClick:()=>{L(u,g,j,w)},disabled:!j,children:"Filter Most Active User"}),(0,v.jsx)(s.A,{onClick:()=>{k(null),S(""),A(null),p(""),f(t)},style:{marginLeft:8},children:"Reset Filters"})]}),i?(0,v.jsx)(c.A,{size:"large"}):(0,v.jsx)(l.A,{columns:N,dataSource:h,rowKey:"id",pagination:!1})]})}}}]);
//# sourceMappingURL=75.a996f072.chunk.js.map